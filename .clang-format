---
# Base on Google Style and project instructions (@instructions.mdc)
BasedOnStyle: Google
Language: Cpp
Standard: c++17

# Line length and indentations
ColumnLimit: 80
IndentWidth: 2
TabWidth: 2
UseTab: Never
AccessModifierOffset: -1
ConstructorInitializerIndentWidth: 4
ContinuationIndentWidth: 4

# Braces and arguments
BreakBeforeBraces: Attach
AlignAfterOpenBracket: Align
AllowAllArgumentsOnNextLine: true
AllowAllParametersOfDeclarationOnNextLine: true

# Include sorting (Aligned with @instructions.mdc)
SortIncludes: true
IncludeBlocks: Regroup

# 간소화된 include 규칙 - 더 신뢰성 있는 정렬 제공
IncludeCategories:
  # 1. 관련 헤더
  - Regex:           '^"[^/]*\.h"'
    Priority:        1
  # 2. C 시스템 헤더
  - Regex:           '^<.*\.h>'
    Priority:        2
  # 3. C++ 표준 라이브러리 헤더
  - Regex:           '^<[a-z_]+>'
    Priority:        3
  # 4. Abseil 헤더
  - Regex:           '^"absl/'
    Priority:        4
  # 5. 기타 라이브러리 헤더 (OpenCV, yaml-cpp 등)
  - Regex:           '^<'
    Priority:        5
  # 6. 프로젝트 헤더
  - Regex:           '^"'
    Priority:        6

# Other formatting options (aligning with Google Style)
AlignConsecutiveAssignments: None
AlignConsecutiveDeclarations: None
AlignOperands: Align # Align operators, etc.
AllowShortBlocksOnASingleLine: Never # Always use braces on new lines
AllowShortCaseLabelsOnASingleLine: false
AllowShortFunctionsOnASingleLine: None # Disallow short functions on one line
AllowShortIfStatementsOnASingleLine: Never
AllowShortLoopsOnASingleLine: false
AlwaysBreakAfterReturnType: None
AlwaysBreakBeforeMultilineStrings: false # Prefer not breaking before multiline strings
AlwaysBreakTemplateDeclarations: Yes
BinPackArguments: false # Prefer not bin packing arguments
BinPackParameters: false # Prefer not bin packing parameters
BreakBeforeBinaryOperators: None # Break after binary operators
BreakBeforeTernaryOperators: true
BreakConstructorInitializers: BeforeColon
BreakInheritanceList: BeforeColon
CompactNamespaces: false
FixNamespaceComments: false # Disabled as per Google Style

# Pointer alignment
PointerAlignment: Left
DerivePointerAlignment: false

# Space management
SpaceAfterCStyleCast: true
SpaceAfterTemplateKeyword: true
SpaceBeforeAssignmentOperators: true
SpaceBeforeCpp11BracedList: true # Add space before braced list
SpaceBeforeCtorInitializerColon: true
SpaceBeforeInheritanceColon: true
SpaceBeforeParens: ControlStatements # Only before control statement parens
SpaceBeforeRangeBasedForLoopColon: true
SpaceInEmptyParentheses: false
SpacesBeforeTrailingComments: 2
SpacesInAngles: false
SpacesInCStyleCastParentheses: true
SpacesInContainerLiterals: true # Add spaces in {}
SpacesInParentheses: false
SpacesInSquareBrackets: false

# Force braces for control statements
InsertBraces: true

# Keep comments near code
ReflowComments: true 